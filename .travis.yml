sudo: true
branches:
  except:
  - gh-pages
language: node_js
node_js:
  - "10"
install:
  - npm install
script:
  - npm run check
after_success:
  - git config user.name $GIT_CONFIG_USERNAME
  - git config user.email $GIT_CONFIG_EMAIL
  - echo $GIT_TOKEN > ~/.ssh/id_rsa.pub
  - printf 'git.code.oa.com\n    StrictHostKeyChecking no\n' > ~/.ssh/config
  - ./deploy.sh $GIT_REPO $GIT_BRANCH